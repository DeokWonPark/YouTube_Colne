[{"C:\\Users\\ghrnr\\Documents\\Front-end-Study\\ReactStudy\\templete\\src\\index.js":"1","C:\\Users\\ghrnr\\Documents\\Front-end-Study\\ReactStudy\\templete\\src\\app.jsx":"2","C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\index.js":"3","C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\app.jsx":"4","C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\header.jsx":"5","C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\videos.jsx":"6","C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\video.jsx":"7","C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\sidebar.jsx":"8","C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\videoView.jsx":"9","C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\videoInfo.jsx":"10","C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\sideVideo.jsx":"11","C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\view.jsx":"12","C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\subscribebar.jsx":"13"},{"size":220,"mtime":1610680800521,"results":"14","hashOfConfig":"15"},{"size":89,"mtime":1610681071769,"results":"16","hashOfConfig":"15"},{"size":270,"mtime":1611155612301,"results":"17","hashOfConfig":"18"},{"size":12298,"mtime":1611844358889,"results":"19","hashOfConfig":"18"},{"size":2613,"mtime":1611845067677,"results":"20","hashOfConfig":"18"},{"size":924,"mtime":1611795362476,"results":"21","hashOfConfig":"18"},{"size":1050,"mtime":1611838727632,"results":"22","hashOfConfig":"18"},{"size":2684,"mtime":1611845188068,"results":"23","hashOfConfig":"18"},{"size":272,"mtime":1611840387917,"results":"24","hashOfConfig":"18"},{"size":3126,"mtime":1611840792384,"results":"25","hashOfConfig":"18"},{"size":907,"mtime":1611579420967,"results":"26","hashOfConfig":"18"},{"size":695,"mtime":1611805597002,"results":"27","hashOfConfig":"18"},{"size":921,"mtime":1611809181445,"results":"28","hashOfConfig":"18"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1h8rn0w",{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},"105b95b",{"filePath":"36","messages":"37","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"38","usedDeprecatedRules":"39"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"35"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"35"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"57"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},"C:\\Users\\ghrnr\\Documents\\Front-end-Study\\ReactStudy\\templete\\src\\index.js",[],"C:\\Users\\ghrnr\\Documents\\Front-end-Study\\ReactStudy\\templete\\src\\app.jsx",[],"C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\index.js",[],["62","63"],"C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\app.jsx",["64","65","66","67"],"import React, { Component } from 'react';\nimport './app.css';\nimport Header from './components/header';\nimport Videos from './components/videos';\nimport Sidebar from './components/sidebar'\nimport View from './components/view';\n\nclass App extends Component {\n  state={\n    videos:[\n\n    ],\n    subscribe:[\n\n    ],\n    video_info:{},\n    View:<></>,\n    toggle:false,\n    auth:null,\n  }\n\n  APIKEY=process.env.REACT_APP_API_KEY;\n  API_CLIENT_ID=process.env.REACT_APP_CLIENT_ID;\n\n  GETResponse=(uri,callback)=>{\n    const requestOptions = {\n      method: 'GET',\n      redirect: 'follow'\n    };\n\n    fetch(uri, requestOptions)\n      .then(response => response.json())\n      .then((result) => {\n        const promises=[];\n        result.items.map((item)=>{\n          promises.push(this.LoadChannelItems(item.snippet.channelId,item)); //수행할 비동기 함수들을 삽입\n        });\n    \n        Promise.all(promises).then((values)=> callback(values)); //병렬적으로 비동기 함수 실행\n      })\n      .catch(error => console.log('error', error));\n  }\n\n  LoadChannelItems=async (channelId,item)=>{\n    const requestOptions = {\n      method: 'GET',\n      redirect: 'follow'\n    };\n    \n     await fetch(`https://www.googleapis.com/youtube/v3/channels?part=snippet&id=${channelId}&key=${this.APIKEY}`, requestOptions)\n      .then((response) => response.json())\n      .then((result) => {\n        item.snippet.channels=result.items[0].snippet.thumbnails.medium.url;\n        item.snippet.channel_description=result.items[0].snippet.description;\n      })\n      .catch(error => console.log('error', error));\n    \n      return new Promise((resolve,reject)=>{\n        resolve(item);\n      })\n  }\n\n  LoadVideoItems=()=>{\n    const uri=`https://www.googleapis.com/youtube/v3/videos?part=snippet&chart=mostPopular&maxResults=25&regionCode=kr&key=${this.APIKEY}`;\n    this.GETResponse(uri,(values)=>{this.setState({videos:values})});\n  }\n\n  SearchVideoItem=(text)=>{\n    if(this.dftRef.current.style.display===\"none\"){\n          this.handleMainView();\n    }\n    const uri=`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=15&q=${text}&type=video&regionCode=kr&key=${this.APIKEY}`;\n    this.GETResponse(uri,(values)=>{\n              const videos=[...values];\n              this.setState({videos});\n    });\n  }\n\n  LoadSubscribe=async ()=>{\n    if(this.state.auth===null){\n      return;\n    }\n    const requestOptions = {\n      method: 'GET',\n      redirect: 'follow'\n    };\n   \n    await fetch(`https://www.googleapis.com/youtube/v3/subscriptions?part=snippet&mine=true&maxResults=50&access_token=${this.state.auth}`, requestOptions)\n      .then(response => response.json())\n      .then((result) => {\n        const subscribe=[...result.items];\n        this.setState({subscribe});\n      })\n      .catch(error => console.log('error', error));\n  }\n\n  handleSucribeClick=(item)=>{\n    if(this.dftRef.current.style.display===\"none\"){\n      this.handleMainView();\n    }\n    const uri=`https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${item.snippet.resourceId.channelId}&maxResults=10&key=${this.APIKEY}`;\n    this.GETResponse(uri,(values)=>{\n              const videos=[...values];\n              this.setState({videos});\n    });\n  }\n\n  handleLikeVideo=()=>{\n    if(this.state.auth==null){\n      this.oauthSignIn();\n      return;\n    }\n    if(this.dftRef.current.style.display===\"none\"){\n      this.handleMainView();\n    }\n    const uri=`https://www.googleapis.com/youtube/v3/videos?part=snippet&myRating=like&maxResult=3&access_token=${this.state.auth}`;\n    this.GETResponse(uri,(values)=>{\n              const videos=[...values];\n              this.setState({videos});\n    });\n  }\n  \n  subscribeInsert=async (channelId)=>{\n      const myHeaders = new Headers();\n      myHeaders.append(\"Authorization\", `Bearer ${this.state.auth}`);\n      myHeaders.append(\"Content-Type\", \"text/plain\");\n\n      const value={\n        snippet:{\n          resourceId:{\n            channelId:channelId\n          }\n        }\n      }\n\n      const requestOptions = {\n        method: 'POST',\n        headers: myHeaders,\n        body: JSON.stringify(value),\n        redirect: 'follow'\n      };\n\n      let status=null;\n\n      await fetch(\"https://www.googleapis.com/youtube/v3/subscriptions?part=snippet\", requestOptions)\n        .then(response => response.status)\n        .then(result=> status=Number.parseInt(result))\n        .catch(error => console.log('error', error));\n\n        return status;\n  }\n\n  subscribeDelete=async (issubscribe)=>{\n    const myHeaders = new Headers();\n    myHeaders.append(\"Authorization\", `Bearer ${this.state.auth}`);\n\n    const requestOptions = {\n      method: 'DELETE',\n      headers: myHeaders,\n      redirect: 'follow'\n    };\n\n    let status=null;\n\n    await fetch(`https://www.googleapis.com/youtube/v3/subscriptions?id=${issubscribe}`, requestOptions)\n      .then(response => response.status)\n      .then(result=> status=status=Number.parseInt(result))\n      .catch(error => console.log('error', error));\n\n      return status;\n  }\n  \n  handleSubscribe=async (issubscribe,channelId)=>{ \n    if(this.state.auth===null){\n      this.oauthSignIn();\n    }\n    if(issubscribe===null){\n      //post\n      const status=await this.subscribeInsert(channelId);\n      if(status<400){\n        await this.LoadSubscribe();\n        this.setState({View:<View \n          videos={this.state.videos} \n          video_info={this.state.video_info}\n          subscribe={this.state.subscribe} \n          onView={this.handleOtherVideoView}\n          onSubscribe={this.handleSubscribe}></View>});\n      }\n    }\n    else{\n      //delete\n      const status=await this.subscribeDelete(issubscribe);\n      if(status<400){\n        await this.LoadSubscribe();\n        this.setState({View:<View \n          videos={this.state.videos} \n          video_info={this.state.video_info}\n          subscribe={this.state.subscribe} \n          onView={this.handleOtherVideoView}\n          onSubscribe={this.handleSubscribe}></View>});\n      }\n    }\n  }\n\n  parseQueryString=()=>{\n    const fragmentString = window.location.hash.substring(1);\n    const params = {};\n    let token;\n    let regex = /([^&=]+)=([^&]*)/g, m;\n    while (m = regex.exec(fragmentString)) {\n      params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);\n    }\n    if (Object.keys(params).length > 0) {\n      localStorage.setItem('oauth2-params', JSON.stringify(params) );\n    }\n    if(localStorage.getItem('oauth2-params')!==null){\n      token= JSON.parse(localStorage.getItem('oauth2-params'))['access_token'];\n      this.setState({auth:token});\n    }\n  }\n\n  handleAuth=()=>{\n    if(this.state.auth===null){\n      this.oauthSignIn();\n    }\n    else{\n      this.oauthSignOut();\n    }\n  }\n\n  oauthSignIn=()=> {\n    const oauth2Endpoint = 'https://accounts.google.com/o/oauth2/v2/auth';\n  \n    const form = document.createElement('form');\n    form.setAttribute('method', 'GET');\n    form.setAttribute('action', oauth2Endpoint);\n    const scope=\"https://www.googleapis.com/auth/youtube https://www.googleapis.com/auth/youtube.force-ssl https://www.googleapis.com/auth/youtube.readonly https://www.googleapis.com/auth/youtubepartner\"\n\n    const params = {'client_id': this.API_CLIENT_ID,\n                  'redirect_uri': 'https://deokwonpark.github.io/YouTube_Colne/',\n                  'response_type': 'token',\n                  'scope': scope,\n                  'include_granted_scopes': 'true',\n                  'state': 'pass-through value'};\n  \n    for (let p in params) {\n      const input = document.createElement('input');\n      input.setAttribute('type', 'hidden');\n      input.setAttribute('name', p);\n      input.setAttribute('value', params[p]);\n      form.appendChild(input);\n    }\n  \n    document.body.appendChild(form);\n    form.submit();\n  }\n\n  oauthSignOut=()=>{\n    const revokeTokenEndpoint = 'https://oauth2.googleapis.com/revoke';\n\n    const form = document.createElement('form');\n    form.setAttribute('method', 'post');\n    form.setAttribute('action', revokeTokenEndpoint);\n\n    const tokenField = document.createElement('input');\n    tokenField.setAttribute('type', 'hidden');\n    tokenField.setAttribute('name', 'token');\n    tokenField.setAttribute('value', this.state.auth);\n    form.appendChild(tokenField);\n\n    document.body.appendChild(form);\n    form.submit();\n    localStorage.removeItem(\"oauth2-params\");\n    this.setState({auth:null});\n    window.location.assign(\"https://deokwonpark.github.io/YouTube_Colne/\");\n  }\n\n  dftRef=React.createRef();\n  viewRef=React.createRef();\n\n  handleVideoView=async (video)=>{\n    this.dftRef.current.style.display=\"none\";\n    this.viewRef.current.style.display=\"flex\";\n\n    const video_info={...video};\n    await this.setState({video_info});\n\n    this.setState({View:<View \n      videos={this.state.videos} \n      video_info={this.state.video_info}\n      subscribe={this.state.subscribe} \n      onView={this.handleOtherVideoView}\n      onSubscribe={this.handleSubscribe}></View>});\n\n    let player;\n\n    let id;\n    if(video.id instanceof Object){\n        id=video.id.videoId;\n    }\n    else{\n        id=video.id;\n    }\n\n    if(window.YT!=null){\n      player = new window.YT.Player('ytplayer', {\n        height: '100%',\n        width: '100%',\n        videoId: `${id}`,\n        playerVars:{\n          autoplay:1,\n        }\n      });\n    }\n    else{\n      const script=document.createElement('script');\n      script.src=\"https://www.youtube.com/player_api\";\n      script.classList.add(\"YouTube_api\");\n\n      const firstScriptTag = document.getElementsByTagName('script')[0];\n      firstScriptTag.parentNode.insertBefore(script, firstScriptTag);\n\n      window.onYouTubePlayerAPIReady=()=>{\n        player = new window.YT.Player('ytplayer', {\n          height: '100%',\n          width: '100%',\n          videoId: `${id}`,\n          playerVars:{\n            autoplay:1,\n          }\n        });\n      }\n    }\n  }\n\n  handleOtherVideoView=async (video)=>{\n\n    const video_info={...video};\n    await this.setState({video_info});\n\n    this.setState({View:<></>});\n    this.setState({View:<View \n      videos={this.state.videos} \n      video_info={this.state.video_info}\n      subscribe={this.state.subscribe} \n      onView={this.handleOtherVideoView}\n      onSubscribe={this.handleSubscribe}></View>});\n    let player;\n\n    let id;\n    if(video.id instanceof Object){\n        id=video.id.videoId;\n    }\n    else{\n        id=video.id;\n    }\n\n    \n    player = new window.YT.Player('ytplayer', {\n      height: '100%',\n      width: '100%',\n      videoId: `${id}`,\n      playerVars:{\n        autoplay:1,\n      }\n    });\n    \n  }\n          \n  handleMainView=()=>{\n    this.dftRef.current.style.display=\"flex\";    \n    this.viewRef.current.style.display=\"none\";     \n    this.setState({View:<></>});\n  }                                \n\n  handleSearch=(text)=>{\n    this.SearchVideoItem(text);                           \n  }\n\n  handleToggle=()=>{\n    const flag=(this.state.toggle?false:true);\n    this.setState({toggle:flag});\n  }\n\n  async componentDidMount(){\n    this.LoadVideoItems();\n    await this.parseQueryString();\n    this.LoadSubscribe();\n  }\n                \n  render() {                      \n    return <div className=\"inner\">                   \n      <Header                                                   \n      onMainView={this.handleMainView}\n      onSearch={this.handleSearch} \n      onToggle={this.handleToggle}\n      onAuth={this.handleAuth}\n      auth={this.state.auth}                                                                                                  \n      ></Header>                                         \n      <section className=\"main\" ref={this.dftRef}>\n        <Sidebar \n        onCategory={this.handleSearch} \n        toggle={this.state.toggle} \n        auth={this.state.auth}\n        onAuth={this.oauthSignIn}\n        subscribe={this.state.subscribe}\n        onSubscribe={this.handleSucribeClick}\n        onLike={this.handleLikeVideo}\n        ></Sidebar>\n        <Videos videos={this.state.videos}      \n                onView={this.handleVideoView}>\n        </Videos>\n      </section>\n      <section className=\"videoView\" ref={this.viewRef}>\n        {this.state.View}\n      </section>\n    </div>\n  }\n}\n\nexport default App;\n\n",["68","69"],"C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\header.jsx",[],"C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\videos.jsx",["70"],"import React, { Component } from 'react';\r\nimport Video from './video';\r\nimport styles from '../css/videos.module.css';\r\n\r\nclass Videos extends Component {\r\n    render() {\r\n        let id;\r\n        if(this.props.videos)\r\n        return <section>\r\n            <ul className={styles.videos}>\r\n                {this.props.videos.map((item)=>{\r\n                    let id;\r\n                    if(item.id instanceof Object){\r\n                        id=item.id.videoId;\r\n                    }\r\n                    else{\r\n                        id=item.id;\r\n                    }\r\n\r\n                    return <Video\r\n                    info={item}\r\n                    key={id}\r\n                    onView={this.props.onView}\r\n                    view={false}\r\n                    >\r\n                    </Video>\r\n                }\r\n                )}\r\n            </ul>\r\n        </section>\r\n    }\r\n}\r\n\r\nexport default Videos;","C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\video.jsx",[],["71","72"],"C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\sidebar.jsx",[],"C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\videoView.jsx",[],["73","74"],"C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\videoInfo.jsx",["75","76"],"C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\sideVideo.jsx",[],["77","78"],"C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\view.jsx",[],"C:\\Users\\ghrnr\\Documents\\YouTube_Clone\\src\\components\\subscribebar.jsx",[],{"ruleId":"79","replacedBy":"80"},{"ruleId":"81","replacedBy":"82"},{"ruleId":"83","severity":1,"message":"84","line":35,"column":32,"nodeType":"85","messageId":"86","endLine":35,"endColumn":34},{"ruleId":"87","severity":1,"message":"88","line":210,"column":12,"nodeType":"89","messageId":"90","endLine":210,"endColumn":42},{"ruleId":"91","severity":1,"message":"92","line":324,"column":9,"nodeType":"93","messageId":"94","endLine":324,"endColumn":15},{"ruleId":"91","severity":1,"message":"92","line":359,"column":5,"nodeType":"93","messageId":"94","endLine":359,"endColumn":11},{"ruleId":"79","replacedBy":"95"},{"ruleId":"81","replacedBy":"96"},{"ruleId":"91","severity":1,"message":"97","line":7,"column":13,"nodeType":"93","messageId":"94","endLine":7,"endColumn":15},{"ruleId":"79","replacedBy":"98"},{"ruleId":"81","replacedBy":"99"},{"ruleId":"79","replacedBy":"100"},{"ruleId":"81","replacedBy":"101"},{"ruleId":"83","severity":1,"message":"84","line":41,"column":40,"nodeType":"85","messageId":"86","endLine":41,"endColumn":42},{"ruleId":"102","severity":1,"message":"103","line":63,"column":9,"nodeType":"104","messageId":"105","endLine":65,"endColumn":10},{"ruleId":"79","replacedBy":"106"},{"ruleId":"81","replacedBy":"107"},"no-native-reassign",["108"],"no-negated-in-lhs",["109"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","no-cond-assign","Expected a conditional expression and instead saw an assignment.","AssignmentExpression","missing","no-unused-vars","'player' is assigned a value but never used.","Identifier","unusedVar",["108"],["109"],"'id' is defined but never used.",["108"],["109"],["108"],["109"],"no-lone-blocks","Nested block is redundant.","BlockStatement","redundantNestedBlock",["108"],["109"],"no-global-assign","no-unsafe-negation"]